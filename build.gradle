plugins {
    id "java"
    id "com.github.johnrengelman.shadow" version "7.0.0"
}

subprojects {
    apply plugin: "com.github.johnrengelman.shadow"

    archivesBaseName = project.maven_name
    version = maven_version + project.mc_version
    group = maven_group

    configurations {
        include
        implementation.extendsFrom(include)
    }

    repositories {
        maven {
            url = "https://repo.spongepowered.org/repository/maven-public"
        }
        maven {
            url = "https://repo.viaversion.com"
        }
    }

    dependencies {
        include "com.viaversion:viaversion:${project.viaversion_version}"
        include "com.viaversion:viabackwards:${project.viabackwards_version}"
        include "com.viaversion:viarewind-universal:${project.viarewind_version}"
        include "org.yaml:snakeyaml:${project.snake_yml_version}"

        include "net.raphimc:ViaLoader:${project.vialoader_version}"
    }

    jar {
        manifest.attributes(
                "Specification-Title": "viaforge",
                "Specification-Vendor": "viaforge",
                "Specification-Version": "1",
                "Implementation-Title": project.name,
                "Implementation-Version": "${archiveVersion}",
                "Implementation-Vendor" :"viaforge",
                "Implementation-Timestamp": new Date().format("yyyy-MM-dd"-"HH:mm:ssZ"),
                "TweakClass": "org.spongepowered.asm.launch.MixinTweaker",
                "TweakOrder": "0",
                "FMLCorePluginContainsFMLMod": "true",
                "FMLCorePlugin": "de.florianmichael.viaforge.mixin.MixinLoader",
                "MixinConfigs": "mixins.${maven_name}.json",
                "ForceLoadAsMod": "true"
        )
        enabled = false
    }
}
